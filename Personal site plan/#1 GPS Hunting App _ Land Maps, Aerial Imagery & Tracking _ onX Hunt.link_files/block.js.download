(()=>{"use strict";class t{constructor(){this.events={},this.subscribe=this.subscribe.bind(this),this.unsubscribe=this.unsubscribe.bind(this),this.emit=this.emit.bind(this)}exists(t){return!!this.events[t]}addEvent(t){this.exists(t)||(this.events[t]=[])}subscribe(t,e){this.exists(t)||this.addEvent(t),"function"==typeof e&&this.events[t].push(e)}unsubscribe(t,e){this.exists(t)&&(this.events[t]=this.events[t].filter((t=>t!==e)))}emit(t,e){this.exists(t)&&this.events[t].forEach((t=>{"function"==typeof t&&t(e)}))}}function e(t,e,n){const s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3);const o=`expires=${s.toUTCString()}`;document.cookie=`${t}=${e};${o};path=/`}function n(t){const e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));if(e)return e[2]}function s(t){n(t)&&(document.cookie=`${t}=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/`)}function o(t){const e=document.cookie.split(";"),s=[];return e.forEach((e=>{const o=e.replace(/^ +/,"").replace(/=.*/,"");if(o.startsWith(t)){const t=o,e=n(o);e&&s.push({key:t,value:e})}})),s}const i=["hunt","offroad","backcountry"];function r(t){const s=`unbounce-${t}-prospect`;n(s)||e(s,"prospect",7)}function a(t=null){if(!t)return r("hunt"),r("offroad"),void r("backcountry");const a=["premium","elite","employee"];i.forEach((i=>{const c=t[i],l=(null==c?void 0:c.membership_level)||"basic";c&&(!function(t,i){const r=i&&["basic","premium","elite","employee"].includes(i)?i:"basic",a=`unbounce-${t}-${r}`;o(`unbounce-${t}`).map((t=>{t.key!==a&&s(t.key)})),n(a)||e(a,r,7)}(i,l),l&&a.includes(l)||r(i))}))}class c{constructor(){this.id=null,this.subscriptions=null}setUserId(t){this.id=t,a(this.subscriptions)}setSubscriptions(t){this.subscriptions=t,a(this.subscriptions)}reset(){this.id=null,this.subscriptions=null,o("unbounce").forEach((t=>{s(t.key)})),a()}}class l{constructor(e){this.events=new t,this.user=new c,this.setUpEvents(),this.setUpDataLayer(),this.setConfig(e),["hunt","backcountry","offroad"].forEach((t=>{o(`unbounce-${t}`).length||r(t)})),this.logEvent({event:"ready",data:{start:Date.now()}})}getConfig(){return this.config}setConfig(t){this.config=t}setUpDataLayer(){window.xDataLayer=window.xDataLayer||[],this.processDataLayer(window.xDataLayer);const t=window.xDataLayer.push;window.xDataLayer.push=(...e)=>{const n=[].slice.call(e,0);return this.processDataLayer(e),t.apply(window.xDataLayer,n)}}processDataLayer(t){t.forEach((t=>{"object"==typeof t&&null!==t&&this.emitEvent(t)}))}emitEvent(t){this.events.emit("dataLayer",t),"object"==typeof t&&null!==t&&"event"in t&&"string"==typeof t.event&&this.events.emit(t.event,t)}logEvent(t){window.xDataLayer.push(t)}setUpEvents(){this.events.subscribe("dataLayer",(t=>{"object"==typeof t&&null!==t&&"user"in t&&"object"==typeof t.user&&null!==t.user&&"id"in t.user&&"string"==typeof t.user.id&&(this.user.setUserId(t.user.id),"subscriptions"in t.user&&"object"==typeof t.user.subscriptions&&null!==t.user.subscriptions&&this.user.setSubscriptions(t.user.subscriptions))})),this.events.subscribe("login",(t=>{"object"==typeof t&&null!==t&&"event"in t&&"login"===t.event&&"data"in t&&"object"==typeof t.data&&null!==t.data&&"user"in t.data&&"object"==typeof t.data.user&&null!==t.data.user&&"id"in t.data.user&&"string"==typeof t.data.user.id&&this.user.setUserId(t.data.user.id)})),this.events.subscribe("logout",(t=>{"object"==typeof t&&null!==t&&"event"in t&&"logout"===t.event&&this.user.reset()}))}}class u{constructor(t){this.app=t}log(t){this.app.logEvent(t)}subscribe(t,e){this.app.events.subscribe(t,e)}unsubscribe(t,e){this.app.events.unsubscribe(t,e)}}function d(t){return new u(t)}const v="consent.store",p="consent.acknowledgement",h={ad_storage:"granted",analytics_storage:"granted",functionality_storage:"granted",personalization_storage:"granted",security_storage:"granted"};function g(){const t=localStorage.getItem(v);if(t){return JSON.parse(t)}}function b(t=h){localStorage.setItem(v,JSON.stringify(t))}const m=new URL("https://www.onxmaps.com/privacy-policy");function y(t,e=m,n){if(localStorage.getItem(p))return;const{body:s}=document,o=document.createElement("div");o.id="onx-cm",o.className="onx-cm",o.role="alertdialog",o.tabIndex=-1,o.innerHTML=`\n    <div class="onx-cm" tabindex="-1">\n        <div role="document" class="onx-cm__content" tabindex="0">\n            <div class="onx-cm__message">\n                We use cookies to improve your browsing experience, to show you\n                personalized content, and for statistical purposes. By continuing\n                to navigate our website, you accept our use of cookies. Read our\n                Privacy Policy to <a class="onx-cm__policy" href="${e.toString()}">learn more</a>.\n            </div>\n            <div class="onx-cm__actions"></div>\n        </div>\n    </div>\n    `;const i=o.querySelector(".onx-cm__actions"),r=document.createElement("button");r.className="onx-cm__button",r.role="button",r.innerText="Close",r.onclick=()=>{const e=document.querySelector(".onx-cm");e&&e.remove(),b(t),function(){const t=new Date;localStorage.setItem(p,t.toUTCString())}(),n&&n()},i&&i.append(r),document.body.append(o);const a=document.createElement("style");a.textContent="\n        .onx-cm {\n            box-sizing: border-box;\n            position: fixed;\n            display: flex;\n            justify-content: center;\n            z-index: 99999999999;\n            width: 100%;\n            padding: 1.5rem 1rem;\n            background-color: rgba(255,255,255,1);\n            bottom: 0;\n            left: 0;\n            box-shadow: 0 -5px 10px -5px rgba(0,0,0,0.25);\n            font-family: 'Roboto', Helvetica, Arial, sans-serif;\n            line-height: 1.375em;\n        }\n        .onx-cm__content{\n            box-sizing: border-box;\n            display: flex;\n            justify-content: center;\n            flex-wrap: wrap;\n            width: 100%;\n            max-width: 1200px;\n            margin: 0;\n        }\n        .onx-cm__message {\n            margin: 0 1rem;\n            max-width: 800px;\n            flex-grow: 1;\n        }\n        .onx-cm__actions {\n            display: flex;\n            align-items: center;\n            margin: 0.5rem 1rem;\n        }\n        .onx-cm__button {\n            border: none;\n            cursor: pointer;\n            padding: 0.5rem 2rem;\n            border-radius: 8px;\n            background-color: #333;\n            color: #fff;\n        }\n        .onx-cm__button:hover {\n            background-color: #222;\n        }\n    ",s.append(a)}class f{constructor(t){var e,n;this.app=t,this.defaultConsent=(null===(e=this.app.config)||void 0===e?void 0:e.defaultConsent)||h,this.privacyPolicy=null===(n=this.app.config)||void 0===n?void 0:n.privacyPolicy,this.events=d(this.app),g()&&this.events.log({event:"consent",data:g()})}softAcknowledgement(){y(this.defaultConsent,this.privacyPolicy,(()=>{this.events.log({event:"consent_updated",data:g()})}))}}function _(){var t;return window.WebX||(window.WebX=new l(t)),window.WebX}const w=d(_());x=_(),new f(x);var x;class L{constructor(t){this.target=t.target,this.navToggleItems=this.target.querySelectorAll(".nav-toggle"),this.navbar=this.target.querySelector(".navigation-bar"),this.navbarOriginTop=this.navbar.style.top,this.navWrapper=this.target.querySelector(".nav-wrapper"),this.primaryNav=this.navWrapper.querySelector(".primary-nav"),this.darkOverlay=this.navWrapper.querySelector(".overlay-dark-layer"),this.product=this.navWrapper.getAttribute("data-product"),this.navProducts=this.target.querySelectorAll(".product-menu"),this.productToggles=this.target.querySelectorAll(".product-menu__toggle"),this.backButton=this.target.querySelector(".contextual-nav__back-button"),this.navHeader=this.target.querySelector(".contextual-nav__header"),this.logoutForm=this.target.querySelector("#logout-form"),this.activeSubNav=null,this.prevScrollpos=window.pageYOffset,this.init()}init(){this.logoutForm&&this.logoutForm.addEventListener("submit",(async t=>(t.preventDefault(),w.log({event:"logout"}),await fetch("/api/v1/logout",{method:"POST"}),window.location.reload(),!1))),window.onscroll=()=>{const t=window.pageYOffset;if(t>this.navbar.offsetHeight&&this.prevScrollpos<t){this.navbar.style.top=`-${this.navbar.offsetHeight+5}px`;const t=this.navbar.querySelectorAll(".dropdown-active");t.length&&t.forEach((t=>{t.classList.remove("dropdown-active")}))}else this.navbar.style.top=this.navbarOriginTop;this.prevScrollpos=t},this.navToggleItems.forEach((t=>{t.addEventListener("click",(()=>{this.navWrapper.classList.toggle("overlay-active"),this.primaryNav.classList.toggle("active"),document.body.classList.toggle("blur"),document.body.classList.toggle("menu-open")}))})),this.productToggles.forEach((t=>{t.addEventListener("click",(()=>{this.navProducts.forEach((e=>{e!==t.parentNode&&e.classList.remove("active-product")})),t.parentNode.classList.toggle("active-product")}))}));const t=this.target.querySelector(".nav-product-login");t&&t.addEventListener("click",(e=>{""===t.getAttribute("href")&&e.preventDefault(),t.classList.toggle("active")}));const e=this.target.querySelector(".nav-product-login__inner.desktop");e&&e.addEventListener("click",(t=>{""===e.getAttribute("href")&&t.preventDefault(),e.classList.toggle("active")}));const n=this.target.querySelectorAll(".nav-product-login__mobile-menu-toggle"),s=document.querySelector(".contextual-nav");if(n&&s){const t=()=>{const t=this.navWrapper.querySelectorAll(".subnav-active");t&&t.forEach((t=>{t.classList.remove("subnav-active")})),this.activeSubNav&&this.activeSubNav.classList.remove("is-active")},e=t=>{""===t.target.getAttribute("href")&&t.preventDefault(),t.stopPropagation(),document.body.classList.add("menu-open"),s.classList.toggle("active"),document.body.classList.add("blur"),this.navWrapper.classList.toggle("overlay-active")},o=()=>{s.classList.remove("active"),this.navWrapper.classList.remove("overlay-active"),this.primaryNav.classList.remove("active"),document.body.classList.remove("blur"),document.body.classList.remove("menu-open"),t()},i=e=>{e.stopPropagation(),s.classList.remove("active"),this.navWrapper.classList.remove("overlay-active"),document.body.classList.remove("blur"),document.body.classList.remove("menu-open"),t()},r=t=>{""===t.target.getAttribute("href")&&t.preventDefault(),s.classList.add("subnav-active"),t.currentTarget.classList.add("subnav-active");const e=t.currentTarget.querySelector(".product-menu__subnav");e.classList.add("is-active"),s.scroll({top:0,behavior:"smooth"}),this.activeSubNav=e},a=e=>{e.stopPropagation(),e.preventDefault(),s.scroll({top:0,behavior:"smooth"}),t()},c=t=>{t.currentTarget.classList.toggle("is-active")},l=t=>{(window.dataLayer||[]).push({event:`${t}_navigation_app_login_click`})},u=t=>{"#"===t.target.getAttribute("href")&&(t.stopPropagation(),t.preventDefault()),t.currentTarget.classList.toggle("dropdown-active")};s.querySelectorAll(".has-children").forEach((t=>{t.addEventListener("click",r)}));s.querySelector(".contextual-nav__close-icon").addEventListener("click",i);const d=this.primaryNav.querySelector(".primary-nav__footer__app-button");d.addEventListener("click",c),this.primaryNav.addEventListener("scroll",(()=>{d.classList.remove("is-active")}));const v=document.querySelector(".navigation-bar__spacer");if(v){const t=()=>{const t=this.navbar.offsetHeight;v.style.height=`${t}px`};window.addEventListener("resize",t),t()}n.forEach((t=>t.addEventListener("click",e))),this.backButton.addEventListener("click",a),this.darkOverlay.addEventListener("click",o);const p=this.navbar.querySelectorAll(".navigation-bar__items > li.has-children");p.length&&p.forEach((t=>t.addEventListener("click",u)));const h=document.querySelector(".nav-product-login__dropdown__nav");h&&h.addEventListener("click",(()=>l("desktop")));const g=document.querySelector(".primary-nav__footer__dropdown__nav");g&&g.addEventListener("click",(()=>l("mobile")));const b=document.querySelector(".nav-product-login__mobile");b&&b.addEventListener("click",(()=>l("desktop")));const m=document.querySelector(".contextual-nav__footer__app-button");m&&m.addEventListener("click",(()=>l("mobile")))}}}const S=document.querySelector("#main-navigation");S&&new L({target:S})})();